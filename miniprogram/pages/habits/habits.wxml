<!--pages/habits/habits.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="header-title">æˆ‘çš„ä¹ æƒ¯</text>
    <view class="header-actions">
      <text class="header-date">{{currentDate}}</text>
      <button class="btn-add" bindtap="createHabit" size="mini" type="primary">+ æ–°å»º</button>
    </view>
  </view>

  <!-- ä¹ æƒ¯åˆ—è¡¨ -->
  <view class="habits-list" wx:if="{{habits.length > 0}}">
    <view class="habit-item" wx:for="{{habits}}" wx:key="id" bindtap="viewHabit" data-id="{{item.id}}">
      <view class="habit-icon">
        <text class="icon">{{item.icon || 'ğŸ¯'}}</text>
      </view>
      <view class="habit-info">
        <view class="habit-header">
          <text class="habit-name">{{item.name}}</text>
          <view class="habit-status" wx:if="{{item.status === 1}}">
            <text class="status-dot"></text>
            <text class="status-text">è¿›è¡Œä¸­</text>
          </view>
          <view class="habit-status" wx:else>
            <text class="status-dot inactive"></text>
            <text class="status-text">å·²æš‚åœ</text>
          </view>
        </view>
        <text class="habit-desc">{{item.description || 'æš‚æ— æè¿°'}}</text>
        <view class="habit-stats">
          <text class="stat-item">è¿ç»­ {{item.streak_days || 0}} å¤©</text>
          <text class="stat-item">ç´¯è®¡ {{item.total_checkins || 0}} æ¬¡</text>
        </view>
      </view>
      <view class="habit-action" catchtap="checkIn" data-id="{{item.id}}">
        <button class="btn-check-in" size="mini" type="primary" wx:if="{{item.today_checked === false}}">æ‰“å¡</button>
        <view class="checked" wx:else>
          <text class="checked-icon">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:else>
    <text class="empty-icon">ğŸ¯</text>
    <text class="empty-text">è¿˜æ²¡æœ‰åˆ›å»ºä¹ æƒ¯</text>
    <button class="btn-primary" bindtap="createHabit">åˆ›å»ºç¬¬ä¸€ä¸ªä¹ æƒ¯</button>
  </view>
</view>
