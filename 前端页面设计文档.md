# 习惯日记小程序 - 前端页面设计文档

## 页面架构设计

### 页面结构概览

```
pages/
├── index/                    # 首页（已有）
├── habits/                   # 习惯列表页（已有，需扩展）
├── habit-detail/             # 习惯详情页（已有，需扩展）
├── habit-create/             # 创建习惯页（已有，需扩展）
├── notes/                    # 笔记列表页（已有，需扩展）
├── note-detail/              # 笔记详情页（已有，需扩展）
├── note-create/              # 创建笔记页（已有，需扩展）
├── statistics/               # 统计页（已有，需扩展）
├── profile/                  # 个人中心页（已有，需扩展）
├── materials/                # 素材列表页（新增）
├── material-detail/          # 素材详情页（新增）
├── material-create/          # 创建素材页（新增）
├── material-categories/      # 素材分类管理页（新增）
├── task-categories/          # 任务分类管理页（新增）
└── achievement-rate/         # 达成率统计页（新增）
```

### 底部导航栏更新

```json
{
  "tabBar": {
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "首页"
      },
      {
        "pagePath": "pages/habits/habits",
        "text": "打卡"
      },
      {
        "pagePath": "pages/materials/materials",
        "text": "素材"
      },
      {
        "pagePath": "pages/statistics/statistics",
        "text": "统计"
      },
      {
        "pagePath": "pages/profile/profile",
        "text": "我的"
      }
    ]
  }
}
```

## 模块一：打卡表管理模块页面设计

### 1.1 任务分类管理页面 (task-categories)

#### 页面功能
- 显示所有任务分类列表
- 支持添加新分类
- 支持编辑分类信息
- 支持删除分类
- 支持拖拽排序

#### 页面结构
```xml
<view class="task-categories-page">
  <view class="header">
    <text class="title">任务分类</text>
    <button class="add-btn" bindtap="handleAdd">添加分类</button>
  </view>
  
  <view class="category-list">
    <view class="category-item" wx:for="{{categories}}" wx:key="id">
      <view class="category-icon" style="background-color: {{item.color}}">
        <text>{{item.icon}}</text>
      </view>
      <view class="category-info">
        <text class="category-name">{{item.name}}</text>
        <text class="category-count">{{item.count}}个任务</text>
      </view>
      <view class="category-actions">
        <button class="edit-btn" bindtap="handleEdit" data-id="{{item.id}}">编辑</button>
        <button class="delete-btn" bindtap="handleDelete" data-id="{{item.id}}">删除</button>
      </view>
    </view>
  </view>
</view>
```

#### 交互逻辑
- 点击"添加分类"按钮，弹出分类编辑弹窗
- 点击"编辑"按钮，弹出分类编辑弹窗，预填充当前分类信息
- 点击"删除"按钮，弹出确认对话框，确认后删除分类
- 支持长按拖拽排序

#### 数据请求
```javascript
getCategories() {
  wx.request({
    url: `${API_BASE}/task-categories`,
    method: 'GET',
    data: { openid: this.data.openid },
    success: (res) => {
      this.setData({ categories: res.data.data });
    }
  });
}

addCategory(data) {
  wx.request({
    url: `${API_BASE}/task-categories`,
    method: 'POST',
    data: { ...data, openid: this.data.openid },
    success: (res) => {
      this.getCategories();
      wx.showToast({ title: '添加成功' });
    }
  });
}
```

### 1.2 扩展习惯列表页面 (habits)

#### 新增功能
- 分类筛选功能
- 时间段筛选功能
- 标签筛选功能
- 显示目标值和实际值
- 显示达成率

#### 页面结构更新
```xml
<view class="filter-bar">
  <picker mode="selector" range="{{categories}}" bindchange="handleCategoryChange">
    <view class="filter-item">{{selectedCategory || '全部分类'}}</view>
  </picker>
  
  <picker mode="selector" range="{{timeSlots}}" bindchange="handleTimeSlotChange">
    <view class="filter-item">{{selectedTimeSlot || '全部时段'}}</view>
  </picker>
  
  <picker mode="multiSelector" range="{{tags}}" bindchange="handleTagChange">
    <view class="filter-item">标签筛选</view>
  </picker>
</view>

<view class="habit-list">
  <view class="habit-item" wx:for="{{habits}}" wx:key="id">
    <view class="habit-header">
      <text class="habit-name">{{item.name}}</text>
      <view class="habit-tags">
        <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
      </view>
    </view>
    
    <view class="habit-progress">
      <progress percent="{{item.achievementRate}}" stroke-width="6" activeColor="#4CAF50"/>
      <text class="progress-text">{{item.actualValue}}/{{item.targetValue}}</text>
    </view>
    
    <view class="habit-footer">
      <text class="time-slot">{{item.timeSlotText}}</text>
      <text class="achievement-rate">达成率 {{item.achievementRate}}%</text>
    </view>
  </view>
</view>
```

#### 数据处理
```javascript
getHabits() {
  wx.request({
    url: `${API_BASE}/habits`,
    method: 'GET',
    data: {
      openid: this.data.openid,
      category_id: this.data.selectedCategoryId,
      time_slot: this.data.selectedTimeSlot,
      tags: this.data.selectedTags
    },
    success: (res) => {
      const habits = res.data.data.map(habit => ({
        ...habit,
        achievementRate: habit.targetValue > 0 
          ? Math.round((habit.actualValue / habit.targetValue) * 100) 
          : 0,
        timeSlotText: this.getTimeSlotText(habit.timeSlot)
      }));
      this.setData({ habits });
    }
  });
}
```

### 1.3 扩展打卡记录页面 (habit-detail)

#### 新增功能
- 完成备注功能
- 满意度评分功能
- 耗时记录功能

#### 页面结构更新
```xml
<view class="check-in-form">
  <view class="form-item">
    <text class="label">完成状态</text>
    <switch checked="{{completed}}" bindchange="handleStatusChange"/>
  </view>
  
  <view class="form-item">
    <text class="label">满意度评分</text>
    <view class="rating-stars">
      <text class="star" 
            wx:for="{{[1,2,3,4,5]}}" 
            wx:key="*this"
            class="{{item <= satisfactionScore ? 'active' : ''}}"
            bindtap="handleRating"
            data-score="{{item}}">★</text>
    </view>
  </view>
  
  <view class="form-item">
    <text class="label">耗时（分钟）</text>
    <input type="number" 
           value="{{timeSpent}}" 
           bindinput="handleTimeSpentInput"
           placeholder="请输入耗时"/>
  </view>
  
  <view class="form-item">
    <text class="label">完成备注</text>
    <textarea value="{{completionNotes}}" 
              bindinput="handleNotesInput"
              placeholder="记录完成情况、心得体会..."/>
  </view>
  
  <button class="submit-btn" bindtap="handleSubmit">提交打卡</button>
</view>
```

### 1.4 达成率统计页面 (achievement-rate)

#### 页面功能
- 显示总体达成率
- 显示各任务达成率
- 达成率图表展示
- 达成率趋势分析

#### 页面结构
```xml
<view class="achievement-rate-page">
  <view class="summary-card">
    <text class="summary-label">总体达成率</text>
    <text class="summary-value">{{overallRate}}%</text>
    <text class="summary-detail">{{completedCount}}/{{totalCount}}个任务</text>
  </view>
  
  <view class="chart-container">
    <ec-canvas id="achievement-chart" canvas-id="achievement-chart"></ec-canvas>
  </view>
  
  <view class="habit-list">
    <view class="habit-item" wx:for="{{habits}}" wx:key="id">
      <text class="habit-name">{{item.name}}</text>
      <view class="habit-progress">
        <progress percent="{{item.achievementRate}}" stroke-width="8"/>
        <text class="progress-text">{{item.achievementRate}}%</text>
      </view>
      <text class="habit-detail">{{item.actualValue}}/{{item.targetValue}}</text>
    </view>
  </view>
</view>
```

#### 数据请求
```javascript
getAchievementRate() {
  wx.request({
    url: `${API_BASE}/statistics/achievement-rate`,
    method: 'GET',
    data: {
      openid: this.data.openid,
      start_date: this.data.startDate,
      end_date: this.data.endDate
    },
    success: (res) => {
      const data = res.data.data;
      this.setData({
        overallRate: data.achievement_rate,
        completedCount: data.completed_habits,
        totalCount: data.total_habits,
        habits: data.habits
      });
      this.renderChart(data.habits);
    }
  });
}
```

## 模块二：素材收集笔记模块页面设计

### 2.1 素材列表页面 (materials)

#### 页面功能
- 显示素材列表（支持瀑布流布局）
- 支持按分类筛选
- 支持按标签筛选
- 支持关键词搜索
- 支持收藏功能
- 支持下拉刷新和上拉加载

#### 页面结构
```xml
<view class="materials-page">
  <view class="search-bar">
    <input class="search-input" 
           value="{{keyword}}" 
           bindinput="handleSearchInput"
           placeholder="搜索素材..."/>
    <button class="search-btn" bindtap="handleSearch">搜索</button>
  </view>
  
  <scroll-view class="filter-bar" scroll-x>
    <view class="filter-item {{!selectedCategoryId ? 'active' : ''}}" 
          bindtap="handleCategoryFilter" 
          data-id="">全部</view>
    <view class="filter-item {{item.id === selectedCategoryId ? 'active' : ''}}" 
          wx:for="{{categories}}" 
          wx:key="id"
          bindtap="handleCategoryFilter" 
          data-id="{{item.id}}">{{item.name}}</view>
  </scroll-view>
  
  <scroll-view class="materials-list" scroll-y>
    <view class="waterfall-container">
      <view class="waterfall-column">
        <view class="material-card" 
              wx:for="{{leftColumnMaterials}}" 
              wx:key="id"
              bindtap="handleMaterialDetail"
              data-id="{{item.id}}">
          <image class="material-image" src="{{item.imageUrl}}" mode="aspectFill"/>
          <view class="material-info">
            <text class="material-title">{{item.title}}</text>
            <text class="material-content">{{item.content}}</text>
            <view class="material-tags">
              <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
            </view>
            <view class="material-footer">
              <text class="material-type">{{item.materialTypeText}}</text>
              <text class="material-favorite {{item.isFavorite ? 'active' : ''}}" 
                    bindtap="handleFavorite" 
                    data-id="{{item.id}}" 
                    data-favorite="{{item.isFavorite}}"
                    catchtap="true">♥</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="waterfall-column">
        <view class="material-card" 
              wx:for="{{rightColumnMaterials}}" 
              wx:key="id"
              bindtap="handleMaterialDetail"
              data-id="{{item.id}}">
          <image class="material-image" src="{{item.imageUrl}}" mode="aspectFill"/>
          <view class="material-info">
            <text class="material-title">{{item.title}}</text>
            <text class="material-content">{{item.content}}</text>
            <view class="material-tags">
              <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
            </view>
            <view class="material-footer">
              <text class="material-type">{{item.materialTypeText}}</text>
              <text class="material-favorite {{item.isFavorite ? 'active' : ''}}" 
                    bindtap="handleFavorite" 
                    data-id="{{item.id}}" 
                    data-favorite="{{item.isFavorite}}"
                    catchtap="true">♥</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
  
  <button class="add-btn" bindtap="handleAddMaterial">添加素材</button>
</view>
```

#### 数据处理
```javascript
getMaterials() {
  wx.request({
    url: `${API_BASE}/materials`,
    method: 'GET',
    data: {
      openid: this.data.openid,
      category_id: this.data.selectedCategoryId,
      tags: this.data.selectedTags,
      keyword: this.data.keyword,
      page: this.data.page,
      page_size: 20
    },
    success: (res) => {
      const materials = res.data.data.list.map(material => ({
        ...material,
        materialTypeText: this.getMaterialTypeText(material.material_type),
        tags: material.tags ? material.tags.split(',') : []
      }));
      
      const leftColumn = [];
      const rightColumn = [];
      materials.forEach((item, index) => {
        if (index % 2 === 0) {
          leftColumn.push(item);
        } else {
          rightColumn.push(item);
        }
      });
      
      this.setData({
        leftColumnMaterials: leftColumn,
        rightColumnMaterials: rightColumn,
        hasMore: materials.length === 20
      });
    }
  });
}

toggleFavorite(e) {
  const { id, favorite } = e.currentTarget.dataset;
  wx.request({
    url: `${API_BASE}/materials/${id}/favorite`,
    method: 'POST',
    data: { 
      openid: this.data.openid,
      is_favorite: favorite ? 0 : 1
    },
    success: () => {
      this.getMaterials();
      wx.showToast({ title: favorite ? '取消收藏' : '收藏成功' });
    }
  });
}
```

### 2.2 素材详情页面 (material-detail)

#### 页面功能
- 显示素材详细信息
- 支持编辑素材
- 支持删除素材
- 支持收藏/取消收藏
- 显示素材来源

#### 页面结构
```xml
<view class="material-detail-page">
  <image class="material-image" src="{{material.imageUrl}}" mode="aspectFill"/>
  
  <view class="material-header">
    <text class="material-title">{{material.title}}</text>
    <view class="material-actions">
      <button class="action-btn" bindtap="handleEdit">编辑</button>
      <button class="action-btn delete" bindtap="handleDelete">删除</button>
    </view>
  </view>
  
  <view class="material-info">
    <view class="info-item">
      <text class="label">分类</text>
      <text class="value">{{material.categoryName}}</text>
    </view>
    <view class="info-item">
      <text class="label">类型</text>
      <text class="value">{{material.materialTypeText}}</text>
    </view>
    <view class="info-item">
      <text class="label">来源</text>
      <text class="value">{{material.source}}</text>
    </view>
  </view>
  
  <view class="material-tags">
    <text class="tag" wx:for="{{material.tags}}" wx:key="*this">{{item}}</text>
  </view>
  
  <view class="material-content">
    <text class="content-text">{{material.content}}</text>
  </view>
  
  <view class="material-footer">
    <text class="view-count">查看 {{material.viewCount}} 次</text>
    <button class="favorite-btn {{material.isFavorite ? 'active' : ''}}" 
            bindtap="handleFavorite">
      {{material.isFavorite ? '已收藏' : '收藏'}}
    </button>
  </view>
</view>
```

### 2.3 创建素材页面 (material-create)

#### 页面功能
- 支持选择素材类型
- 支持上传图片
- 支持选择分类
- 支持添加标签
- 支持输入标题和内容

#### 页面结构
```xml
<view class="material-create-page">
  <view class="form-item">
    <text class="label">素材类型</text>
    <picker mode="selector" range="{{materialTypes}}" bindchange="handleTypeChange">
      <view class="picker">{{selectedTypeText || '请选择类型'}}</view>
    </picker>
  </view>
  
  <view class="form-item">
    <text class="label">分类</text>
    <picker mode="selector" range="{{categories}}" range-key="name" bindchange="handleCategoryChange">
      <view class="picker">{{selectedCategoryName || '请选择分类'}}</view>
    </picker>
  </view>
  
  <view class="form-item">
    <text class="label">标题</text>
    <input class="input" 
           value="{{title}}" 
           bindinput="handleTitleInput"
           placeholder="请输入标题"/>
  </view>
  
  <view class="form-item">
    <text class="label">内容</text>
    <textarea class="textarea" 
              value="{{content}}" 
              bindinput="handleContentInput"
              placeholder="请输入内容..."/>
  </view>
  
  <view class="form-item">
    <text class="label">图片</text>
    <view class="image-uploader">
      <image class="image" wx:if="{{imageUrl}}" src="{{imageUrl}}" mode="aspectFill"/>
      <button class="upload-btn" bindtap="handleUploadImage">上传图片</button>
    </view>
  </view>
  
  <view class="form-item">
    <text class="label">标签</text>
    <view class="tags-input">
      <text class="tag" wx:for="{{selectedTags}}" wx:key="*this">{{item}}</text>
      <input class="tag-input" 
             bindinput="handleTagInput"
             bindconfirm="handleAddTag"
             placeholder="输入标签后回车添加"/>
    </view>
  </view>
  
  <view class="form-item">
    <text class="label">来源</text>
    <input class="input" 
           value="{{source}}" 
           bindinput="handleSourceInput"
           placeholder="请输入来源"/>
  </view>
  
  <button class="submit-btn" bindtap="handleSubmit">保存素材</button>
</view>
```

### 2.4 素材分类管理页面 (material-categories)

#### 页面功能
- 显示所有素材分类
- 支持添加新分类
- 支持编辑分类
- 支持删除分类
- 支持拖拽排序

#### 页面结构
```xml
<view class="material-categories-page">
  <view class="header">
    <text class="title">素材分类</text>
    <button class="add-btn" bindtap="handleAdd">添加分类</button>
  </view>
  
  <view class="category-list">
    <view class="category-item" wx:for="{{categories}}" wx:key="id">
      <view class="category-icon" style="background-color: {{item.color}}">
        <text>{{item.icon}}</text>
      </view>
      <view class="category-info">
        <text class="category-name">{{item.name}}</text>
        <text class="category-count">{{item.count}}个素材</text>
      </view>
      <view class="category-actions">
        <button class="edit-btn" bindtap="handleEdit" data-id="{{item.id}}">编辑</button>
        <button class="delete-btn" bindtap="handleDelete" data-id="{{item.id}}">删除</button>
      </view>
    </view>
  </view>
</view>
```

## 模块三：扩展统计模块页面设计

### 3.1 扩展统计页面 (statistics)

#### 新增功能
- 效率分析
- 趋势分析
- 对比分析
- 数据可视化图表

#### 页面结构更新
```xml
<view class="statistics-page">
  <view class="tabs">
    <view class="tab {{activeTab === 'overview' ? 'active' : ''}}" 
          bindtap="handleTabChange" 
          data-tab="overview">概览</view>
    <view class="tab {{activeTab === 'efficiency' ? 'active' : ''}}" 
          bindtap="handleTabChange" 
          data-tab="efficiency">效率</view>
    <view class="tab {{activeTab === 'trend' ? 'active' : ''}}" 
          bindtap="handleTabChange" 
          data-tab="trend">趋势</view>
    <view class="tab {{activeTab === 'compare' ? 'active' : ''}}" 
          bindtap="handleTabChange" 
          data-tab="compare">对比</view>
  </view>
  
  <view class="tab-content">
    <view class="overview-tab" wx:if="{{activeTab === 'overview'}}">
      <view class="summary-cards">
        <view class="summary-card">
          <text class="card-label">总打卡次数</text>
          <text class="card-value">{{summary.totalCheckIns}}</text>
        </view>
        <view class="summary-card">
          <text class="card-label">达成率</text>
          <text class="card-value">{{summary.achievementRate}}%</text>
        </view>
        <view class="summary-card">
          <text class="card-label">连续打卡天数</text>
          <text class="card-value">{{summary.streakDays}}</text>
        </view>
        <view class="summary-card">
          <text class="card-label">总习惯数</text>
          <text class="card-value">{{summary.totalHabits}}</text>
        </view>
      </view>
    </view>
    
    <view class="efficiency-tab" wx:if="{{activeTab === 'efficiency'}}">
      <view class="efficiency-summary">
        <view class="summary-item">
          <text class="label">平均耗时</text>
          <text class="value">{{efficiency.averageTimeSpent}}分钟</text>
        </view>
        <view class="summary-item">
          <text class="label">最高效时段</text>
          <text class="value">{{efficiency.mostEfficientTimeSlotText}}</text>
        </view>
        <view class="summary-item">
          <text class="label">最高效习惯</text>
          <text class="value">{{efficiency.mostEfficientHabit}}</text>
        </view>
        <view class="summary-item">
          <text class="label">平均满意度</text>
          <text class="value">{{efficiency.averageSatisfaction}}分</text>
        </view>
      </view>
      
      <view class="chart-container">
        <ec-canvas id="efficiency-chart" canvas-id="efficiency-chart"></ec-canvas>
      </view>
    </view>
    
    <view class="trend-tab" wx:if="{{activeTab === 'trend'}}">
      <view class="trend-filter">
        <picker mode="selector" range="{{metrics}}" bindchange="handleMetricChange">
          <view class="filter-item">{{selectedMetricText}}</view>
        </picker>
      </view>
      
      <view class="chart-container">
        <ec-canvas id="trend-chart" canvas-id="trend-chart"></ec-canvas>
      </view>
      
      <view class="trend-summary">
        <view class="summary-item">
          <text class="label">平均值</text>
          <text class="value">{{trend.average}}</text>
        </view>
        <view class="summary-item">
          <text class="label">最大值</text>
          <text class="value">{{trend.max}}</text>
        </view>
        <view class="summary-item">
          <text class="label">最小值</text>
          <text class="value">{{trend.min}}</text>
        </view>
        <view class="summary-item">
          <text class="label">增长率</text>
          <text class="value {{trend.growthRate >= 0 ? 'positive' : 'negative'}}">
            {{trend.growthRate >= 0 ? '+' : ''}}{{trend.growthRate}}%
          </text>
        </view>
      </view>
    </view>
    
    <view class="compare-tab" wx:if="{{activeTab === 'compare'}}">
      <view class="compare-filter">
        <picker mode="selector" range="{{compareTypes}}" bindchange="handleCompareTypeChange">
          <view class="filter-item">{{selectedCompareTypeText}}</view>
        </picker>
      </view>
      
      <view class="compare-result">
        <view class="period-card current">
          <text class="period-title">当前周期</text>
          <text class="period-date">{{compare.currentPeriod.startDate}} 至 {{compare.currentPeriod.endDate}}</text>
          <view class="period-stats">
            <view class="stat-item">
              <text class="label">打卡次数</text>
              <text class="value">{{compare.currentPeriod.totalCheckIns}}</text>
            </view>
            <view class="stat-item">
              <text class="label">达成率</text>
              <text class="value">{{compare.currentPeriod.achievementRate}}%</text>
            </view>
            <view class="stat-item">
              <text class="label">连续天数</text>
              <text class="value">{{compare.currentPeriod.streakDays}}</text>
            </view>
            <view class="stat-item">
              <text class="label">平均满意度</text>
              <text class="value">{{compare.currentPeriod.averageSatisfaction}}分</text>
            </view>
          </view>
        </view>
        
        <view class="period-card previous">
          <text class="period-title">对比周期</text>
          <text class="period-date">{{compare.previousPeriod.startDate}} 至 {{compare.previousPeriod.endDate}}</text>
          <view class="period-stats">
            <view class="stat-item">
              <text class="label">打卡次数</text>
              <text class="value">{{compare.previousPeriod.totalCheckIns}}</text>
            </view>
            <view class="stat-item">
              <text class="label">达成率</text>
              <text class="value">{{compare.previousPeriod.achievementRate}}%</text>
            </view>
            <view class="stat-item">
              <text class="label">连续天数</text>
              <text class="value">{{compare.previousPeriod.streakDays}}</text>
            </view>
            <view class="stat-item">
              <text class="label">平均满意度</text>
              <text class="value">{{compare.previousPeriod.averageSatisfaction}}分</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="compare-growth">
        <text class="growth-title">增长率</text>
        <view class="growth-stats">
          <view class="growth-item">
            <text class="label">打卡次数</text>
            <text class="value {{compare.growth.checkIns >= 0 ? 'positive' : 'negative'}}">
              {{compare.growth.checkIns >= 0 ? '+' : ''}}{{compare.growth.checkIns}}%
            </text>
          </view>
          <view class="growth-item">
            <text class="label">达成率</text>
            <text class="value {{compare.growth.achievement >= 0 ? 'positive' : 'negative'}}">
              {{compare.growth.achievement >= 0 ? '+' : ''}}{{compare.growth.achievement}}%
            </text>
          </view>
          <view class="growth-item">
            <text class="label">连续天数</text>
            <text class="value {{compare.growth.streak >= 0 ? 'positive' : 'negative'}}">
              {{compare.growth.streak >= 0 ? '+' : ''}}{{compare.growth.streak}}%
            </text>
          </view>
          <view class="growth-item">
            <text class="label">满意度</text>
            <text class="value {{compare.growth.satisfaction >= 0 ? 'positive' : 'negative'}}">
              {{compare.growth.satisfaction >= 0 ? '+' : ''}}{{compare.growth.satisfaction}}%
            </text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
```

## 公共组件设计

### 1. 加载组件 (loading)
```xml
<view class="loading-container" wx:if="{{loading}}">
  <view class="loading-spinner"></view>
  <text class="loading-text">加载中...</text>
</view>
```

### 2. 空状态组件 (empty)
```xml
<view class="empty-container" wx:if="{{empty}}">
  <image class="empty-image" src="/images/empty.png"/>
  <text class="empty-text">{{emptyText}}</text>
</view>
```

### 3. 弹窗组件 (modal)
```xml
<view class="modal-mask" wx:if="{{showModal}}" bindtap="handleMaskClick">
  <view class="modal-container" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">{{title}}</text>
      <button class="close-btn" bindtap="handleClose">×</button>
    </view>
    <view class="modal-content">
      <slot></slot>
    </view>
    <view class="modal-footer">
      <button class="cancel-btn" bindtap="handleCancel">取消</button>
      <button class="confirm-btn" bindtap="handleConfirm">确定</button>
    </view>
  </view>
</view>
```

## 样式规范

### 颜色系统
```css
:root {
  --primary-color: #4CAF50;
  --secondary-color: #FF6B6B;
  --success-color: #4CAF50;
  --warning-color: #FFD93D;
  --danger-color: #FF6B6B;
  --info-color: #4D96FF;
  --text-primary: #333333;
  --text-secondary: #666666;
  --text-disabled: #999999;
  --border-color: #E0E0E0;
  --background-color: #F5F5F5;
  --white: #FFFFFF;
}
```

### 字体规范
```css
:root {
  --font-size-large: 18px;
  --font-size-medium: 16px;
  --font-size-small: 14px;
  --font-size-mini: 12px;
  --font-weight-bold: 600;
  --font-weight-normal: 400;
}
```

### 间距规范
```css
:root {
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
}
```

## 总结

本文档详细设计了习惯日记小程序的所有新增页面，包括3个核心模块的页面设计。每个页面都包含了详细的功能说明、页面结构、交互逻辑和数据请求示例。通过这些设计，可以确保前端开发人员能够准确理解需求，高效完成开发任务。

所有页面都遵循统一的设计规范和交互模式，确保用户体验的一致性。同时，页面设计充分考虑了性能优化和用户体验，支持下拉刷新、上拉加载、懒加载等功能。