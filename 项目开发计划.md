# 习惯日记小程序 - 项目开发计划

## 一、项目概述

### 1.1 项目基本信息
- **项目名称**：习惯日记小程序
- **项目类型**：微信小程序
- **开发周期**：6周
- **团队规模**：1-2人
- **部署环境**：腾讯云轻量应用服务器 + 腾讯云数据库
- **项目定位**：个人成长工具，融合习惯追踪与笔记本功能

### 1.2 项目背景
基于"小日常"小程序的功能特点，开发一款融合习惯追踪与笔记本功能的小程序，帮助用户培养良好习惯的同时记录生活点滴和知识积累。

### 1.3 核心价值
- 习惯养成：通过打卡机制帮助用户建立良好习惯
- 知识积累：提供便捷的笔记本功能记录生活和学习
- 数据驱动：通过统计分析帮助用户了解自己的习惯养成情况
- 极简设计：界面简洁，无社交干扰，专注于个人成长

---

## 二、技术架构

### 2.1 技术栈选择

#### 前端技术栈
- **开发框架**：微信小程序原生框架
- **编程语言**：JavaScript / TypeScript
- **UI组件库**：WeUI / Vant Weapp
- **状态管理**：小程序原生数据绑定
- **云开发**：微信云开发（可选）

#### 后端技术栈
- **运行环境**：Node.js (v16+) 或 Python (3.8+)
- **Web框架**：Express.js / Koa.js 或 Flask / FastAPI
- **API规范**：RESTful API
- **认证授权**：JWT (JSON Web Token)
- **进程管理**：PM2

#### 数据库
- **数据库类型**：MySQL 8.0+
- **连接池**：mysql2 / pymysql
- **ORM工具**：Sequelize / TypeORM 或 SQLAlchemy

#### 部署架构
- **Web服务器**：Nginx
- **反向代理**：Nginx
- **SSL证书**：Let's Encrypt
- **容器化**：Docker（可选）

### 2.2 系统架构图

```
┌─────────────────────────────────────────────────────────┐
│                     微信小程序客户端                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 习惯追踪 │  │ 笔记本   │  │ 统计分析 │  │ 个人中心 │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└──────────────────────┬──────────────────────────────────┘
                       │ HTTPS
                       ▼
┌─────────────────────────────────────────────────────────┐
│                    Nginx 反向代理                        │
│              (SSL终止、负载均衡、静态资源)                 │
└──────────────────────┬──────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────┐
│              Node.js/Python 后端服务                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 用户模块 │  │ 习惯模块 │  │ 笔记模块 │  │ 统计模块 │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└──────────────────────┬──────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────┐
│                   MySQL 数据库                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 用户表   │  │ 习惯表   │  │ 笔记表   │  │ 打卡表   │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
```

---

## 三、数据库设计

### 3.1 数据表结构

#### 3.1.1 用户表 (users)
```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
    openid VARCHAR(100) UNIQUE NOT NULL COMMENT '微信OpenID',
    nickname VARCHAR(50) COMMENT '用户昵称',
    avatar_url VARCHAR(255) COMMENT '头像URL',
    phone VARCHAR(20) COMMENT '手机号',
    email VARCHAR(100) COMMENT '邮箱',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-禁用',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_openid (openid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
```

#### 3.1.2 习惯表 (habits)
```sql
CREATE TABLE habits (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '习惯ID',
    user_id INT NOT NULL COMMENT '用户ID',
    name VARCHAR(100) NOT NULL COMMENT '习惯名称',
    description VARCHAR(500) COMMENT '习惯描述',
    icon VARCHAR(50) COMMENT '图标',
    color VARCHAR(20) COMMENT '颜色',
    frequency_type ENUM('daily','weekly','monthly') DEFAULT 'daily' COMMENT '频率类型',
    target_count INT DEFAULT 1 COMMENT '目标次数',
    reminder_time TIME COMMENT '提醒时间',
    reminder_enabled TINYINT DEFAULT 0 COMMENT '是否开启提醒',
    start_date DATE COMMENT '开始日期',
    end_date DATE COMMENT '结束日期',
    status TINYINT DEFAULT 1 COMMENT '状态：1-进行中，0-已停用',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='习惯表';
```

#### 3.1.3 打卡记录表 (check_in_records)
```sql
CREATE TABLE check_in_records (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '记录ID',
    habit_id INT NOT NULL COMMENT '习惯ID',
    user_id INT NOT NULL COMMENT '用户ID',
    check_in_date DATE NOT NULL COMMENT '打卡日期',
    check_in_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '打卡时间',
    note VARCHAR(500) COMMENT '备注',
    mood TINYINT COMMENT '心情：1-很差，2-差，3-一般，4-好，5-很好',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (habit_id) REFERENCES habits(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    UNIQUE KEY uk_habit_date (habit_id, check_in_date),
    INDEX idx_user_date (user_id, check_in_date),
    INDEX idx_check_in_date (check_in_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='打卡记录表';
```

#### 3.1.4 笔记表 (notes)
```sql
CREATE TABLE notes (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '笔记ID',
    user_id INT NOT NULL COMMENT '用户ID',
    title VARCHAR(200) NOT NULL COMMENT '笔记标题',
    content TEXT COMMENT '笔记内容',
    category_id INT COMMENT '分类ID',
    tags VARCHAR(500) COMMENT '标签（逗号分隔）',
    is_public TINYINT DEFAULT 0 COMMENT '是否公开：1-公开，0-私有',
    view_count INT DEFAULT 0 COMMENT '查看次数',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_category_id (category_id),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='笔记表';
```

#### 3.1.5 笔记分类表 (note_categories)
```sql
CREATE TABLE note_categories (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID',
    user_id INT NOT NULL COMMENT '用户ID',
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    icon VARCHAR(50) COMMENT '图标',
    color VARCHAR(20) COMMENT '颜色',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='笔记分类表';
```

#### 3.1.6 习惯情境表 (habit_scenes)
```sql
CREATE TABLE habit_scenes (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '情境ID',
    user_id INT NOT NULL COMMENT '用户ID',
    name VARCHAR(50) NOT NULL COMMENT '情境名称',
    description VARCHAR(200) COMMENT '情境描述',
    icon VARCHAR(50) COMMENT '图标',
    background_color VARCHAR(20) COMMENT '背景颜色',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='习惯情境表';
```

#### 3.1.7 习惯情境关联表 (habit_scene_relations)
```sql
CREATE TABLE habit_scene_relations (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '关联ID',
    scene_id INT NOT NULL COMMENT '情境ID',
    habit_id INT NOT NULL COMMENT '习惯ID',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (scene_id) REFERENCES habit_scenes(id) ON DELETE CASCADE,
    FOREIGN KEY (habit_id) REFERENCES habits(id) ON DELETE CASCADE,
    UNIQUE KEY uk_scene_habit (scene_id, habit_id),
    INDEX idx_scene_id (scene_id),
    INDEX idx_habit_id (habit_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='习惯情境关联表';
```

#### 3.1.8 统计数据表 (statistics)
```sql
CREATE TABLE statistics (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '统计ID',
    user_id INT NOT NULL COMMENT '用户ID',
    stat_date DATE NOT NULL COMMENT '统计日期',
    total_habits INT DEFAULT 0 COMMENT '总习惯数',
    active_habits INT DEFAULT 0 COMMENT '活跃习惯数',
    checked_in_count INT DEFAULT 0 COMMENT '打卡次数',
    total_notes INT DEFAULT 0 COMMENT '总笔记数',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    UNIQUE KEY uk_user_date (user_id, stat_date),
    INDEX idx_stat_date (stat_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='统计数据表';
```

---

## 四、开发规划

### 4.1 第一周：环境搭建与项目初始化

#### 任务清单
- [ ] 注册微信小程序账号，获取AppID
- [ ] 配置腾讯云服务器环境（Node.js/Python + MySQL）
- [ ] 创建数据库实例和数据库（habit_diary）
- [ ] 初始化后端项目结构
- [ ] 初始化前端小程序项目结构
- [ ] 配置Git版本控制
- [ ] 搭建Nginx反向代理
- [ ] 配置SSL证书

#### 交付物
- 微信小程序账号配置完成
- 服务器环境搭建完成
- 数据库表结构创建完成
- 项目基础框架搭建完成

#### 验收标准
- 能够成功访问服务器
- 数据库连接正常
- 小程序能够启动并显示首页

---

### 4.2 第二周：后端API开发

#### 任务清单
- [ ] 实现用户认证模块（登录、注册、获取用户信息）
- [ ] 实现习惯管理模块（创建、编辑、删除、查询习惯）
- [ ] 实现打卡记录模块（打卡、查询打卡记录）
- [ ] 实现笔记管理模块（创建、编辑、删除、查询笔记）
- [ ] 实现分类管理模块（创建、编辑、删除分类）
- [ ] 实现统计分析模块（统计数据计算）
- [ ] 编写API文档
- [ ] 单元测试

#### 交付物
- 完整的后端API接口
- API文档
- 单元测试报告

#### 验收标准
- 所有API接口功能正常
- API文档完整清晰
- 单元测试通过率>90%

---

### 4.3 第三周：前端小程序开发 - 习惯追踪功能

#### 任务清单
- [ ] 设计并实现首页UI
- [ ] 实现习惯列表展示
- [ ] 实现创建/编辑习惯页面
- [ ] 实现打卡功能
- [ ] 实现打卡日历视图
- [ ] 实现习惯统计图表
- [ ] 实现习惯情境功能
- [ ] 接入后端API

#### 交付物
- 习惯追踪功能完整实现
- UI界面美观易用

#### 验收标准
- 习惯列表正常显示
- 能够创建、编辑、删除习惯
- 打卡功能正常
- 统计图表准确显示

---

### 4.4 第四周：前端小程序开发 - 笔记本功能

#### 任务清单
- [ ] 设计并实现笔记本首页UI
- [ ] 实现笔记列表展示
- [ ] 实现创建/编辑笔记页面（富文本编辑器）
- [ ] 实现笔记分类功能
- [ ] 实现笔记搜索功能
- [ ] 实现笔记标签功能
- [ ] 接入后端API
- [ ] 优化用户体验

#### 交付物
- 笔记本功能完整实现
- 富文本编辑器正常工作

#### 验收标准
- 笔记列表正常显示
- 能够创建、编辑、删除笔记
- 分类和搜索功能正常
- 富文本编辑器功能完整

---

### 4.5 第五周：联调测试与Bug修复

#### 任务清单
- [ ] 前后端联调测试
- [ ] 功能测试（所有功能模块）
- [ ] 性能测试
- [ ] 兼容性测试（不同机型、不同微信版本）
- [ ] 安全测试
- [ ] 修复发现的Bug
- [ ] 代码优化
- [ ] 编写测试报告

#### 交付物
- 测试报告
- Bug修复清单
- 优化后的代码

#### 验收标准
- 所有功能正常运行
- 无严重Bug
- 性能满足要求
- 兼容性良好

---

### 4.6 第六周：部署上线与文档完善

#### 任务清单
- [ ] 提交微信小程序审核
- [ ] 配置生产环境
- [ ] 部署后端服务到生产环境
- [ ] 配置域名和SSL证书
- [ ] 编写用户使用手册
- [ ] 编写开发文档
- [ ] 编写运维文档
- [ ] 项目总结

#### 交付物
- 小程序上线
- 完整的项目文档
- 项目总结报告

#### 验收标准
- 小程序成功上线
- 文档完整清晰
- 生产环境稳定运行

---

## 五、项目里程碑

| 里程碑 | 时间节点 | 交付内容 | 验收标准 |
|--------|----------|----------|----------|
| M1 | 第1周结束 | 环境搭建完成 | 服务器、数据库、项目框架正常 |
| M2 | 第2周结束 | 后端API完成 | 所有API接口正常，文档完整 |
| M3 | 第3周结束 | 习惯追踪功能完成 | 习惯管理、打卡、统计功能正常 |
| M4 | 第4周结束 | 笔记本功能完成 | 笔记管理、分类、搜索功能正常 |
| M5 | 第5周结束 | 测试完成 | 所有功能测试通过，无严重Bug |
| M6 | 第6周结束 | 项目上线 | 小程序成功上线，文档完整 |

---

## 六、风险管理

### 6.1 技术风险
| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 微信小程序API变更 | 中 | 定期关注官方文档，及时适配 |
| 服务器性能不足 | 中 | 做好性能监控，及时扩容 |
| 数据库性能瓶颈 | 中 | 优化SQL查询，添加索引，考虑分库分表 |
| 第三方服务不稳定 | 低 | 做好异常处理，准备备用方案 |

### 6.2 进度风险
| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 开发进度延期 | 中 | 合理分配任务，预留缓冲时间 |
| 需求变更 | 中 | 做好需求管理，控制变更范围 |
| 测试发现问题较多 | 中 | 提前进行单元测试，减少集成问题 |

### 6.3 资源风险
| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 服务器资源不足 | 低 | 提前规划资源，及时扩容 |
| 开发人员不足 | 中 | 合理分配任务，必要时寻求外部支持 |

---

## 七、质量保证

### 7.1 代码质量
- 遵循代码规范（ESLint/Prettier）
- 代码审查（Code Review）
- 单元测试覆盖率>80%
- 集成测试

### 7.2 功能质量
- 功能测试
- 性能测试
- 兼容性测试
- 安全测试

### 7.3 用户体验
- UI/UX设计评审
- 用户测试
- 用户体验优化

---

## 八、资源需求

### 8.1 人力资源
- 前端开发：1人
- 后端开发：1人
- 测试：0.5人
- 设计：0.5人

### 8.2 硬件资源
- 腾讯云轻量应用服务器：2核4GB以上
- 腾讯云数据库：MySQL 1-2GB内存

### 8.3 软件资源
- 开发工具：VS Code、微信开发者工具
- 版本控制：Git
- 项目管理：GitHub/GitLab

### 8.4 成本估算
- 服务器：约100-200元/月
- 数据库：约150-250元/月
- 域名：约50-100元/年
- 其他：约120-200元/月
- **总计：约370-550元/月**

---

## 九、后续迭代计划

### 9.1 V1.1版本（上线后1个月）
- [ ] 添加数据导出功能
- [ ] 添加数据备份功能
- [ ] 优化性能
- [ ] 修复用户反馈的问题

### 9.2 V1.2版本（上线后2个月）
- [ ] 添加习惯模板功能
- [ ] 添加笔记模板功能
- [ ] 添加社交分享功能
- [ ] 添加成就系统

### 9.3 V2.0版本（上线后3-6个月）
- [ ] 添加AI智能推荐功能
- [ ] 添加多端同步功能
- [ ] 添加团队协作功能
- [ ] 添加数据分析功能

---

## 十、成功标准

### 10.1 功能标准
- 所有计划功能正常实现
- 功能完整度>95%
- 功能稳定性>99%

### 10.2 性能标准
- 页面加载时间<2秒
- API响应时间<500ms
- 并发支持>100用户

### 10.3 质量标准
- Bug率<1%
- 用户满意度>4.0/5.0
- 测试通过率>95%

### 10.4 进度标准
- 按时完成所有里程碑
- 项目延期<3天

---

## 十一、附录

### 11.1 API接口列表

#### 用户模块
- POST /api/auth/login - 用户登录
- POST /api/auth/register - 用户注册
- GET /api/user/info - 获取用户信息
- PUT /api/user/info - 更新用户信息

#### 习惯模块
- GET /api/habits - 获取习惯列表
- POST /api/habits - 创建习惯
- PUT /api/habits/:id - 更新习惯
- DELETE /api/habits/:id - 删除习惯
- GET /api/habits/:id - 获取习惯详情

#### 打卡模块
- POST /api/checkin - 打卡
- GET /api/checkin/records - 获取打卡记录
- GET /api/checkin/statistics - 获取打卡统计

#### 笔记模块
- GET /api/notes - 获取笔记列表
- POST /api/notes - 创建笔记
- PUT /api/notes/:id - 更新笔记
- DELETE /api/notes/:id - 删除笔记
- GET /api/notes/:id - 获取笔记详情
- GET /api/notes/search - 搜索笔记

#### 分类模块
- GET /api/categories - 获取分类列表
- POST /api/categories - 创建分类
- PUT /api/categories/:id - 更新分类
- DELETE /api/categories/:id - 删除分类

#### 统计模块
- GET /api/statistics/overview - 获取统计概览
- GET /api/statistics/habits - 获取习惯统计
- GET /api/statistics/notes - 获取笔记统计

### 11.2 项目目录结构

#### 后端项目结构
```
habit-diary-backend/
├── src/
│   ├── config/          # 配置文件
│   ├── controllers/     # 控制器
│   ├── models/          # 数据模型
│   ├── routes/          # 路由
│   ├── services/        # 业务逻辑
│   ├── utils/           # 工具函数
│   ├── middlewares/     # 中间件
│   └── app.js           # 应用入口
├── tests/               # 测试文件
├── package.json
└── README.md
```

#### 前端项目结构
```
habit-diary-frontend/
├── pages/               # 页面
│   ├── index/           # 首页
│   ├── habits/          # 习惯页面
│   ├── notes/           # 笔记页面
│   └── profile/         # 个人中心
├── components/          # 组件
├── utils/              # 工具函数
├── styles/             # 样式文件
├── app.js              # 应用入口
├── app.json            # 应用配置
└── app.wxss            # 全局样式
```

---

**文档版本**：V1.0  
**创建日期**：2025年  
**最后更新**：2025年  
**文档作者**：开发团队
